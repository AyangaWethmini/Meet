@page "/auth-callback"

     @inject AuthService AuthService
     @inject NavigationManager NavigationManager
     @inject IHttpClientFactory HttpClientFactory

     <h3>Processing Login...</h3>

     @code {
         protected override async Task OnInitializedAsync()
         {
             var httpClient = HttpClientFactory.CreateClient("SafeMeetApi");
             var response = await httpClient.GetFromJsonAsync<AuthResponse>("/auth/callback");
             if (response != null)
             {
                 AuthService.SetToken(response.Token, response.User);
                 NavigationManager.NavigateTo("/");
             }
             else
             {
                 NavigationManager.NavigateTo("/error");
             }
         }

         private class AuthResponse
         {
             public string Token { get; set; }
             public User User { get; set; }
         }
     }
